<div class="container">
  <div>
    <h2 style="margin-top: 30px; margin-bottom: 40px;">Modifier un Ecrivain :</h2>
  </div>
  <p></p>
  <form>
    <div class="col-sm-2 col-md-2 col-lg-2">
      <label class="mb-2 text-bold">ID Ecrivain</label>
      <input type="text" [(ngModel)]="currentEcrivain.idEcrivain" name="idEcrivain" class="form-control" readonly>
    </div><br>
    <div class="col-sm-4 col-md-4 col-lg-4">
      <label class="mb-2">Nom Ecrivain</label>
      <input type="text" [(ngModel)]="currentEcrivain.nomEcrivain" name="nomEcrivain" class="form-control"><br>
    </div>
    <div class="col-sm-2 col-md-2 col-lg-2">
      <label class="mb-2">Honoraires</label>
      <input type="number" [(ngModel)]="currentEcrivain.honoraires" name="honoraires" class="form-control"><br>
    </div>
    <div class="col-sm-4 col-md-4 col-lg-4">
      <label class="mb-2">Date Début Carrière</label>
      <input type="date" [ngModel]="currentEcrivain.dateDebutCarriere | date: 'yyyy-MM-dd'"
        (ngModelChange)="currentEcrivain.dateDebutCarriere= $event" name="dateCreation" class="form-control"><br>
    </div>
    <div class="col-sm-4 col-md-4 col-lg-4">
      <label class="mb-2">Genre</label>
      <select class="form-control" id="idG" name="idG" [(ngModel)]="updatedIdG">
        <option *ngFor="let g of genres" [value]="g.idG">
          {{g.nomG}}
        </option>
      </select><br>
    </div>
    <br>
    <hr>
    <div class="col-sm-4 col-md-4 col-lg-4">
      <label style="margin-bottom: 20px;"><b>Image</b></label>
      <input type="file" (change)="onImageUpload($event)" class="form-control">
    </div>
    <br>
    <div class="col-sm-16 col-md-16 col-lg-16">
      <img [src]="myImage" class="card-img-top img-fluid rounded-start" style="width: 360px; height: 380px" alt=" Choisissez une image" />
    </div>
    <br>
    <div class="mt-2" style="margin-left: 80px;">
      <button type="submit" (click)="onAddImageEcrivain()" class="btn btn-success">Ajouter Image</button>
    </div>

    <div class="row row-cols-1 row-cols-md-3 g-4" style="margin-top: 40px;">
      <div class="col" *ngFor="let img of currentEcrivain.images">
        <div class="card h-100 text-center p-2" >
          <img
            class="card-img-top mx-auto"
            src="{{'data:' + img.type + ';base64,' + img.image}}"
            alt="Image"
            style="height: 110px; width: 100px; object-fit: cover;"
          />
          <div class="card-body">
            <button class="btn btn-danger" (click)="supprimerImage(img)">Supprimer</button>
          </div>
        </div>
      </div>
    </div>
    <hr>
    <button type="submit" (click)="updateEcrivain()" class="btn btn-success" style="margin: 40px;">Modifier</button>
  </form>
</div>